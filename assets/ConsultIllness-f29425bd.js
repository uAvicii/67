import{_ as k}from"./CpRadioBtn-85593b7e.js";import{_ as w}from"./CpIcon-a16c1a49.js";import{_ as S}from"./CpNavBar-b9a1f356.js";import{d as A,A as B,u as F,r as N,c as T,C as M,N as o,e as _,f as U,g as O,i as s,h as a,j as i,O as z,P as L,w as P,l as R,L as j,F as q,p as E,q as H}from"./index-17b49d5c.js";import{_ as W}from"./avatar-doctor-b16b586d.js";import{I as p}from"./index-e2c7d3ed.js";import{u as Y}from"./consult-2a405c5e.js";import{s as $}from"./function-call-04230cf2.js";import{_ as G}from"./plugin-vueexport-helper-c27b6911.js";import"./request-50970fcd.js";const u=c=>(E("data-v-d4e89c0d"),c=c(),H(),c),J={class:"consult-illness-page"},K={class:"illness-tip van-hairline--bottom"},Q=u(()=>s("img",{class:"img",src:W},null,-1)),X={class:"info"},Z=u(()=>s("p",{class:"tit"},"在线killer",-1)),ss=u(()=>s("p",{class:"tip"},"请描述你的疾病或症状、是否用药、就诊经历，需要我听过什么样的帮助",-1)),es={class:"safe"},os=u(()=>s("span",null,"内容仅killer可见",-1)),ls={class:"illness-form"},ts={class:"item"},as=u(()=>s("p",null,"本次患病多久了？",-1)),ns={class:"item"},is=u(()=>s("p",null,"此次病情是否去医院就诊过？",-1)),us={class:"illness-img"},cs={class:"tip"},ds=A({__name:"ConsultIllness",setup(c){const d=B(),v=F(),f=[{label:"一周内",value:p.Week},{label:"一月内",value:p.Month},{label:"半年内",value:p.HalfYear},{label:"大于半年",value:p.More}],h=[{label:"就诊过",value:0},{label:"没就诊过",value:1}],r=N([]),g=l=>{Array.isArray(l)||l.file&&(l.status="uploading",l.message="上传中...",Y(l.file).then(e=>{var n;l.status="done",l.message=void 0,l.url=e.data.data.url,(n=o.value.pictures)==null||n.push(e.data.data)}).catch(()=>{l.status="failed",l.message="上传失败"}))},V=l=>{var e;o.value.pictures=(e=o.value.pictures)==null?void 0:e.filter(n=>n.url!==l.url)},b=T(()=>!o.value.illnessDesc||o.value.illnessTime===void 0||o.value.consultFlag===void 0),C=()=>{d.setIllness(o.value),v.push("/patient?isSelect=1")};return M(()=>{d.consult.illnessDesc&&$({title:"温馨提示",message:"是否恢复您之前填写的信息呢？",confirmButtonColor:"var(--cp-primary)"}).then(()=>{o.value=d.consult,r.value=d.consult.pictures||[]})}),(l,e)=>{const n=S,I=w,x=_("van-field"),m=k,y=_("van-uploader"),D=_("van-button");return U(),O(q,null,[s("div",J,[a(n,{title:"图文咨询"})]),s("div",K,[Q,s("div",X,[Z,ss,s("p",es,[a(I,{name:"consult-safe"}),os])])]),s("div",ls,[a(x,{type:"textarea",rows:"3",placeholder:"请详细描述您的病情，病情描述不能为空",modelValue:i(o).illnessDesc,"onUpdate:modelValue":e[0]||(e[0]=t=>i(o).illnessDesc=t)},null,8,["modelValue"]),s("div",ts,[as,a(m,{options:f,modelValue:i(o).illnessTime,"onUpdate:modelValue":e[1]||(e[1]=t=>i(o).illnessTime=t)},null,8,["modelValue"])]),s("div",ns,[is,a(m,{options:h,modelValue:i(o).consultFlag,"onUpdate:modelValue":e[2]||(e[2]=t=>i(o).consultFlag=t)},null,8,["modelValue"])]),s("div",us,[a(y,{modelValue:r.value,"onUpdate:modelValue":e[3]||(e[3]=t=>r.value=t),"upload-icon":"photo-o","upload-text":"上传图片","max-count":"9","max-size":5*1024*1024,"after-read":g,onDelete:V},null,8,["modelValue"]),z(s("p",cs,"上传内容仅医生可见,最多9张图,最大5MB",512),[[L,!r.value.length]])]),a(D,{onClick:C,class:j({disabled:b.value}),type:"primary",block:"",round:""},{default:P(()=>[R("下一步")]),_:1},8,["class"])])],64)}}});const Cs=G(ds,[["__scopeId","data-v-d4e89c0d"]]);export{Cs as default};
