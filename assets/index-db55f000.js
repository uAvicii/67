import{_ as F}from"./CpIcon-6dc0872e.js";import{_ as z}from"./CpNavBar-74e63499.js";import{l as G,a as H,s as J}from"./user-251a3e76.js";import{d as K,u as M,a as O,b as Q,r as n,o as W,c as X,e as u,f as p,g as w,h as t,i as s,t as k,w as r,j as V,k as x,l as I,s as Y,m as C,n as q,p as Z,q as ee}from"./index-a1255d69.js";import{_ as se}from"./_plugin-vue_export-helper-c27b6911.js";import"./request-b886cd59.js";const oe="/test-build/assets/qq-cdcfd9eb.svg",ae=[{required:!0,message:"请输入手机号"},{pattern:/^1[3-9]\d{9}$/,message:"手机号格式不正确"}],te=[{required:!0,message:"请输入密码"},{pattern:/^\w{8,24}$/,message:"密码需8-24个字符"}],c=_=>(Z("data-v-f7f6a460"),_=_(),ee(),_),ne={class:"login-page"},le={class:"login-head"},ue={key:0},re={class:"cp-cell"},ce=c(()=>s("span",null,"我已同意",-1)),de=c(()=>s("a",{href:"javascript:;"},"用户协议",-1)),ie=c(()=>s("span",null,"及",-1)),pe=c(()=>s("a",{href:"javascript:;"},"隐私条款",-1)),_e={class:"cp-cell"},ve=c(()=>s("div",{class:"cp-cell"},[s("a",{href:"javascript:;"},"忘记密码？")],-1)),me={class:"login-other"},fe=c(()=>s("a",{class:"icon",href:"https://163.com"},[s("img",{src:oe,alt:""})],-1)),ge=K({__name:"index",setup(_){const f=M(),S=O(),U=Q(),v=n(!1),l=n(!0),g=n(!1),d=n("13230000001"),h=n("abc12345"),m=n(""),i=n(0);let y;const $=async()=>{if(!g.value)return Y("请勾选我已同意");const a=l.value?await G(d.value,h.value):await H(d.value,m.value);if(a.data.code==500)return C(a.data.message);U.saveUser(a.data.data),q("登录成功");const e=S.query.returnPath;e?f.push(e):f.push("/")},P=async()=>{const{data:a}=await J(d.value);if(a.code==500)return C(a.message);q("发送成功"),m.value=a.data.code,i.value=60,y=setInterval(()=>{i.value--,i.value<=0&&clearInterval(y)},1e3)};W(()=>{clearInterval(y)});const j=()=>{f.push("/register")},B=X(()=>v.value?"text":"password");return(a,e)=>{const R=z,T=u("van-icon"),b=u("van-field"),A=F,N=u("van-checkbox"),L=u("van-button"),D=u("van-form"),E=u("van-divider");return p(),w("div",ne,[t(R,{"right-text":"注册",isLeftArrow:!1,onClick:j}),s("div",le,[s("h3",null,k(l.value?"密码登录":"短信验证码登录"),1),s("a",{href:"javascript:;",onClick:e[0]||(e[0]=o=>l.value=!l.value)},[s("span",null,k(l.value?"短信验证码登录":"密码登录"),1),t(T,{name:"arrow"})])]),t(D,{autocomplete:"off",onSubmit:$},{default:r(()=>[t(b,{placeholder:"请输入手机号",modelValue:d.value,"onUpdate:modelValue":e[1]||(e[1]=o=>d.value=o),rules:V(ae),type:"tel"},null,8,["modelValue","rules"]),l.value?(p(),x(b,{key:0,placeholder:"请输入密码",modelValue:h.value,"onUpdate:modelValue":e[3]||(e[3]=o=>h.value=o),rules:V(te),type:B.value},{button:r(()=>[t(A,{onClick:e[2]||(e[2]=o=>v.value=!v.value),name:`login-login-eye-${v.value?"on":"off"}`},null,8,["name"])]),_:1},8,["modelValue","rules","type"])):(p(),x(b,{key:1,placeholder:"短线验证码",modelValue:m.value,"onUpdate:modelValue":e[4]||(e[4]=o=>m.value=o),rules:[{required:!0,message:"请输入验证码"},{pattern:/^\d{6}$/,message:"验证码6个数字"}]},{button:r(()=>[i.value?(p(),w("span",ue,k(i.value)+"s后再次发送",1)):(p(),w("span",{key:1,class:"btn-send",onClick:P},"发送验证码"))]),_:1},8,["modelValue"])),s("div",re,[t(N,{modelValue:g.value,"onUpdate:modelValue":e[5]||(e[5]=o=>g.value=o)},{default:r(()=>[ce,de,ie,pe]),_:1},8,["modelValue"])]),s("div",_e,[t(L,{block:"",round:"",type:"primary","native-type":"submit"},{default:r(()=>[I("登 录")]),_:1})]),ve]),_:1}),s("div",me,[t(E,null,{default:r(()=>[I("第三方登录")]),_:1}),fe])])}}});const xe=se(ge,[["__scopeId","data-v-f7f6a460"]]);export{xe as default};
