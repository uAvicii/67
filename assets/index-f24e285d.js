import{_ as D}from"./CpIcon-b6aa29ed.js";import{_ as E}from"./CpNavBar-24c7bb1a.js";import{m as G,p as H}from"./rules-1f659873.js";import{l as J,a as K,s as M}from"./user-a42e3f4f.js";import{d as O,u as Q,a as W,b as X,r as n,o as Y,c as Z,e as r,f as p,g as k,h as s,i as o,t as w,w as u,j as V,k as x,l as I,s as ee,m as C,n as U,p as oe,q as te}from"./index-29ccb757.js";import{_ as ae}from"./_plugin-vue_export-helper-c27b6911.js";import"./request-e9b26d75.js";const se=""+new URL("qq-cdcfd9eb.svg",import.meta.url).href,c=_=>(oe("data-v-2d160f08"),_=_(),te(),_),ne={class:"login-page"},le={class:"login-head"},re={key:0},ue={class:"cp-cell"},ce=c(()=>o("span",null,"我已同意",-1)),ie=c(()=>o("a",{href:"javascript:;"},"用户协议",-1)),de=c(()=>o("span",null,"及",-1)),pe=c(()=>o("a",{href:"javascript:;"},"隐私条款",-1)),_e={class:"cp-cell"},ve=c(()=>o("div",{class:"cp-cell"},[o("a",{href:"javascript:;"},"忘记密码？")],-1)),me={class:"login-other"},fe=c(()=>o("a",{class:"icon",href:"https://graph.qq.com/oauth2.0/authorize?client_id=102015968&response_type=token&scope=all&redirect_uri=http%3A%2F%2Fconsult-patients.itheima.net%2Flogin%2Fcallback"},[o("img",{src:se,alt:""})],-1)),he=O({__name:"index",setup(_){const f=Q(),q=W(),S=X(),v=n(!1),l=n(!0),h=n(!1),i=n("13230000001"),g=n("abc12345"),m=n(""),d=n(0);let y;const P=async()=>{if(!h.value)return ee("请勾选我已同意");const a=l.value?await J(i.value,g.value):await K(i.value,m.value);if(a.data.code==500)return C(a.data.message);S.saveUser(a.data.data),U("登录成功");const e=q.query.returnPath;e?f.push(e):f.push("/")},R=async()=>{const{data:a}=await M(i.value);if(a.code==500)return C(a.message);U("发送成功"),m.value=a.data.code,d.value=60,y=setInterval(()=>{d.value--,d.value<=0&&clearInterval(y)},1e3)};Y(()=>{clearInterval(y)});const j=()=>{f.push("/register")},A=Z(()=>v.value?"text":"password");return(a,e)=>{const B=E,F=r("van-icon"),b=r("van-field"),T=D,$=r("van-checkbox"),L=r("van-button"),N=r("van-form"),z=r("van-divider");return p(),k("div",ne,[s(B,{"right-text":"注册",isLeftArrow:!1,onClick:j}),o("div",le,[o("h3",null,w(l.value?"密码登录":"短信验证码登录"),1),o("a",{href:"javascript:;",onClick:e[0]||(e[0]=t=>l.value=!l.value)},[o("span",null,w(l.value?"短信验证码登录":"密码登录"),1),s(F,{name:"arrow"})])]),s(N,{autocomplete:"off",onSubmit:P},{default:u(()=>[s(b,{placeholder:"请输入手机号",modelValue:i.value,"onUpdate:modelValue":e[1]||(e[1]=t=>i.value=t),rules:V(G),type:"tel"},null,8,["modelValue","rules"]),l.value?(p(),x(b,{key:0,placeholder:"请输入密码",modelValue:g.value,"onUpdate:modelValue":e[3]||(e[3]=t=>g.value=t),rules:V(H),type:A.value},{button:u(()=>[s(T,{onClick:e[2]||(e[2]=t=>v.value=!v.value),name:`login-login-eye-${v.value?"on":"off"}`},null,8,["name"])]),_:1},8,["modelValue","rules","type"])):(p(),x(b,{key:1,placeholder:"短线验证码",modelValue:m.value,"onUpdate:modelValue":e[4]||(e[4]=t=>m.value=t),rules:[{required:!0,message:"请输入验证码"},{pattern:/^\d{6}$/,message:"验证码6个数字"}]},{button:u(()=>[d.value?(p(),k("span",re,w(d.value)+"s后再次发送",1)):(p(),k("span",{key:1,class:"btn-send",onClick:R},"发送验证码"))]),_:1},8,["modelValue"])),o("div",ue,[s($,{modelValue:h.value,"onUpdate:modelValue":e[5]||(e[5]=t=>h.value=t)},{default:u(()=>[ce,ie,de,pe]),_:1},8,["modelValue"])]),o("div",_e,[s(L,{block:"",round:"",type:"primary","native-type":"submit"},{default:u(()=>[I("登 录")]),_:1})]),ve]),_:1}),o("div",me,[s(z,null,{default:u(()=>[I("第三方登录")]),_:1}),fe])])}}});const Ie=ae(he,[["__scopeId","data-v-2d160f08"]]);export{Ie as default};
